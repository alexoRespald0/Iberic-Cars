<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anuncio de Coche</title>
<link rel="stylesheet" href="anuncio.css" />
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<header>
    <div class="logo">
      <a href="index.html">
        <img src="Imagenes/IBERIC (2).png" alt="Logo de la empresa" />
      </a>
    </div>
    <h1 class="titulo-header">Iberic Cars</h1>
    <nav>
      <ul>
        <li><a href="index.html">Inicio</a></li>
        <li><a href="buscar.html">Buscar</a></li>
        <li><a href="favorito.html">Favoritos</a></li>
        <li><a href="Contacto/contacto.html">Contacto</a></li>
        <li><a href="login.html"><button class="login">Acceder</button></a> </li>
        <li><button class="buy">Comprar</button></li>
      </ul>
    </nav>
  </header>



<body>
  <div class="anuncio-coche">

   
 <!-- Imagen principal -->
	  <img id="imagen-principal" class="galeria-principal" src="" alt="Vista principal del coche">
    <!-- Miniaturas -->
    <div class="miniaturas">
      <img src="" alt="Vista 1" onclick="cambiarImagenPrincipal(this.src)">
      <img src="" alt="Vista 2" onclick="cambiarImagenPrincipal(this.src)">
      <img src="" alt="Vista 3" onclick="cambiarImagenPrincipal(this.src)">
      <img src="" alt="Vista 4" onclick="cambiarImagenPrincipal(this.src)">
      <img src="" alt="Vista 5" onclick="cambiarImagenPrincipal(this.src)">
    </div>
  <div class="detalles-coche">
  <h1></h1>
  <div class="detalles-grid">
    <div class="detalles-item"></div>
    <div class="detalles-item"></div>
    <div class="detalles-item"></div>
    <div class="detalles-item"></div>
    <div class="detalles-item"></div>
    <div class="detalles-item"></div>
    <div class="detalles-item"></div>
  
  </div>
</div>


    <div class="cta">
      <button onclick="alert('Formulario de contacto no implementado')">AÃ±ade este coche al carro</button>
    </div>

  </div>
</body>
<script>
  const supabaseUrl = 'https://yhcivepnywbvskalfqfd.supabase.co';
  const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InloY2l2ZXBueXdidnNrYWxmcWZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwODA5ODgsImV4cCI6MjA2MjY1Njk4OH0.Nl2_D3j5MHTuGnIaelVrREqLqQSPE-Z8ciVnaJGVa-w';
  const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

  function cambiarImagenPrincipal(src) {
    const img = document.getElementById('imagen-principal');
    img.src = src;
  }

  async function cargarCochePorID(id) {
    const { data, error } = await supabase
      .from('coches')
      .select('*')
      .eq('id_coche', id)
      .single();

    if (error) {
      console.error('Error al cargar datos:', error);
      return;
    }

    // Imagen principal
    document.getElementById('imagen-principal').src = data.imagenprincipal || 'Imagenes/default-car.png';

    // Miniaturas (hasta 5 imÃ¡genes)
    const miniaturas = document.querySelectorAll('.miniaturas img');
    const imagenes = [data.foto1, data.foto2, data.foto3, data.foto4, data.imagenprincipal];
    miniaturas.forEach((img, index) => {
      img.src = imagenes[index] || 'Imagenes/default-car.png';
      img.onclick = () => cambiarImagenPrincipal(img.src);
    });

    // TÃ­tulo: marca + modelo
    document.querySelector('.detalles-coche h1').textContent = `${data.marca} ${data.modelo}`;

    // Detalles
    const detalles = document.querySelectorAll('.detalles-item');
    detalles[0].innerHTML = `<strong>AÃ±o</strong> ${data.aÃ±o}`;
    detalles[1].innerHTML = `<strong>Combustible</strong> ${data.combustible}`;
    detalles[2].innerHTML = `<strong>TransmisiÃ³n</strong> ${data.transmision}`;
    detalles[3].innerHTML = `<strong>Puertas</strong> ${data.puertas}`;
    detalles[4].innerHTML = `<strong>CarrocerÃ­a</strong> ${data.carroceria}`;
    detalles[5].innerHTML = `<strong>Color</strong> ${data.color}`;
    detalles[6].innerHTML = `<strong>Precio</strong> ${data.precio} â‚¬`;
    detalles[7].innerHTML = `<strong>ID</strong> ${data.id}`;
  }

  // Esta parte ya tienes bien implementada, solo mantenla asÃ­ para que cargue el coche al abrir anuncio.html?id=xxx
  window.addEventListener('DOMContentLoaded', () => {
    const params = new URLSearchParams(window.location.search);
    const idCoche = params.get('id_coche');
    if (idCoche) {
      cargarCochePorID(idCoche);
    } else {
      console.warn("No se proporcionÃ³ un ID de coche en la URL.");
      // AquÃ­ podrÃ­as mostrar un mensaje o redirigir a otra pÃ¡gina
    }
  });
</script>
<!-- Footer -->
  <footer>
    <div class="columnas">
      <!-- Columna 1: Logo y nombre -->
      <div class="columna logo-columna">
        <img src="Imagenes/IBERIC (2).png" alt="Logo Iberic Cars" class="footer-logo">
        <h3>Iberic Cars</h3>
      </div>
  
      <!-- Columna 2: Nosotros -->
      <div class="columna">
        <h3>Nosotros</h3>
        <p>Somos un concesionario especializado en la venta de coches de todo tipo: deportivos, familiares, elÃ©ctricos y mÃ¡s. Trabajamos con marcas reconocidas como Audi, BMW, Toyota y Volkswagen.</p>
      </div>
  
      <!-- Columna 3: Contacto -->
      <div class="columna">
        <h3>Contacto</h3>
        <p>ðŸ“ž TelÃ©fono: +34 600 123 456</p>
        <p>ðŸ“· Instagram: <a href="#">@ibericcars</a></p>
        <p>ðŸ“˜ Facebook: <a href="#">Iberic Cars Oficial</a></p>
      </div>
    </div>
    <!-- LÃ­nea inferior de derechos -->
    <div class="footer-bottom">
      Â© 2025 Iberic Cars. Todos los derechos reservados.
    </div>
  </footer>  
</html>


